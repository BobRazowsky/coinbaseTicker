function analytics(){_gaq=[],_gaq.push(["_setAccount","UA-105414043-1"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://ssl.google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}function updateValues(){document.querySelector('input[name="alertValue"]').value=localStorage.alertValue,document.querySelector('input[name="panicValue"]').value=localStorage.panicValue,document.querySelector('input[name="refreshDelay"]').value=localStorage.delay/1e3,document.querySelector('select[name="currency"]').value=localStorage.sourceCurrency,document.querySelector('select[name="crypto"]').value=localStorage.targetCurrency,document.querySelector('input[name="colorChange"]').checked=1==localStorage.colorChange,document.querySelector('select[name="soundSample"]').value=localStorage.soundSample,document.querySelector('input[name="roundBadge"]').checked=1==localStorage.roundBadge}function startListeners(){document.querySelector('select[name="currency"]').onchange=updateCurrency,document.querySelector('select[name="crypto"]').onchange=updateCrypto,document.querySelector('select[name="soundSample"]').onchange=updateSoundSample,document.querySelector('input[name="refreshDelay"]').onchange=updateDelay,document.querySelector('input[name="alertValue"]').onchange=updateAlertValue,document.querySelector('input[name="panicValue"]').onchange=updatePanicValue,document.querySelector('input[name="colorChange"]').onclick=toggleColorChange,document.querySelector('input[name="roundBadge"]').onclick=toggleRoundBadge,document.getElementById("save").addEventListener("click",saveAndApply)}function getJSON(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){if(n.status>=200&&n.status<400){var e=JSON.parse(n.responseText);t(e,n)}},n.onerror=function(){},n.send()}function populateCurrencies(){getJSON("https://api.coinbase.com/v2/currencies",function(e,t){select=document.querySelector('select[name="currency"]');for(var n=0;n<e.data.length;n++){var r=document.createElement("option");r.value=e.data[n].id,r.innerHTML=e.data[n].name,select.appendChild(r)}updateValues()})}function updateCurrency(e){localStorage.sourceCurrency=e.target.value}function updateCrypto(e){localStorage.targetCurrency=e.target.value}function updateDelay(e){var t=e.target.value<1?1:e.target.value;localStorage.delay=1e3*t}function updateAlertValue(e){localStorage.alertValue=e.target.value}function updatePanicValue(e){localStorage.panicValue=e.target.value}function translate(){document.getElementById("strCurrency").innerHTML=browser.i18n.getMessage("strCurrency"),document.getElementById("strCrypto").innerHTML=browser.i18n.getMessage("strCrypto"),document.getElementById("strDelay").innerHTML=browser.i18n.getMessage("strDelay"),document.getElementById("strTargetPrice").innerHTML=browser.i18n.getMessage("strTargetPrice"),document.getElementById("strPanicPrice").innerHTML=browser.i18n.getMessage("strPanicPrice"),document.getElementById("strColorChange").innerHTML=browser.i18n.getMessage("strColorChange"),document.getElementById("strSound").innerHTML=browser.i18n.getMessage("strSound"),document.getElementById("strRound").innerHTML=browser.i18n.getMessage("strRound"),document.getElementById("save").innerHTML=browser.i18n.getMessage("strSave"),document.getElementById("strSeconds").innerHTML=browser.i18n.getMessage("strSeconds"),document.getElementById("strNotifications").innerHTML=browser.i18n.getMessage("strNotifications"),document.title=browser.i18n.getMessage("settingsBtn")}function toggleColorChange(e){localStorage.colorChange=!0===e.target.checked?1:0}function updateSoundSample(e){"mute"==e.target.value?localStorage.soundNotification=0:(localStorage.soundNotification=1,localStorage.soundSample=e.target.value,new Audio("sounds/"+e.target.value+".mp3").play())}function toggleRoundBadge(e){localStorage.roundBadge=!0===e.target.checked?1:0,browser.extension.sendMessage({msg:"resetTicker"})}function saveAndApply(){}function hideUselessFields(){document.querySelector('div[id="alertOptn"]').style.visibility="hidden",document.querySelector('div[id="panicOptn"]').style.visibility="hidden",document.querySelector('div[id="soundOptn"]').style.visibility="hidden"}document.addEventListener("DOMContentLoaded",function(){populateCurrencies(),startListeners(),translate(),analytics();!!window.chrome&&window.chrome.webstore;var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t="undefined"!=typeof InstallTrigger,n=!!document.documentMode,r=!n&&!!window.StyleMedia;(e||t||n||r)&&hideUselessFields()}),window.browser=window.msBrowser||window.browser||window.chrome;